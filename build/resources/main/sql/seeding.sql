CREATE TABLE IF NOT EXISTS `clients` (`id` VARCHAR(255) NOT NULL,`version` BIGINT NOT NULL,`secret` VARCHAR(255) NOT NULL,PRIMARY KEY (`id`)) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `user` (`id` BIGINT NOT NULL AUTO_INCREMENT,`version` BIGINT NOT NULL,`username` VARCHAR(255) NOT NULL, `password` VARCHAR(255) NOT NULL, `password_change_key` VARCHAR(255), `enabled` BOOLEAN NOT NULL DEFAULT FALSE, PRIMARY KEY (`id`)) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `rsa_keys` (`id` BIGINT NOT NULL AUTO_INCREMENT,`version` BIGINT NOT NULL,`public_key` BLOB NOT NULL,`private_key` BLOB NOT NULL,`user_id` BIGINT NOT NULL, FOREIGN KEY(user_id) REFERENCES user(id),PRIMARY KEY (`id`)) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `service_access_token` (`id` BINARY(16) NOT NULL,`version` BIGINT NOT NULL,`issued_at` DATETIME NOT NULL,`expires_in` DATETIME NOT NULL, `client_id` VARCHAR(255) NOT NULL,FOREIGN KEY(`client_id`) REFERENCES `clients`(id),PRIMARY KEY (`id`)) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `user_access_token` (`id` BINARY(16) NOT NULL,`version` BIGINT NOT NULL,`issued_at` DATETIME NOT NULL,`expires_in` DATETIME NOT NULL,`account_id` VARCHAR(255) NOT NULL,`user_id` BIGINT NOT NULL, FOREIGN KEY(`user_id`) REFERENCES `user`(id),PRIMARY KEY (`id`)) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `refresh_token` (`id` BINARY(16) NOT NULL,`version` BIGINT NOT NULL,`issued_at` DATETIME NOT NULL,`expires_in` DATETIME NOT NULL,`access_token_id` BINARY(16) NOT NULL,FOREIGN KEY(`access_token_id`) REFERENCES `user_access_token`(id),PRIMARY KEY (`id`)) ENGINE=InnoDB;